version: '3.8'

services:
  bank-server:
    build: .
    container_name: bank-server
    command: ./server_app
    ports:
      - "8080:8080"
    volumes:
      - ./bank_data.txt:/app/bank_data.txt
    networks:
      - bank-network

  # --- PANEL ADMINISTRATORA ---
  admin-panel:
    build: .
    container_name: admin-panel
    command: ./admin_app
    depends_on:
      - bank-server
    networks:
      - bank-network

  # --- BANKOMATY (4 sztuki) ---
  atm-1:
    build: .
    container_name: atm-1
    command: ./client_app
    depends_on:
      - bank-server
    environment:
      - CLIENT_ID=1
    networks:
      - bank-network

  atm-2:
    build: .
    container_name: atm-2
    command: ./client_app
    depends_on:
      - bank-server
    environment:
      - CLIENT_ID=2
    networks:
      - bank-network

  atm-3:
    build: .
    container_name: atm-3
    command: ./client_app
    depends_on:
      - bank-server
    environment:
      - CLIENT_ID=3
    networks:
      - bank-network

  atm-4:
    build: .
    container_name: atm-4
    command: ./client_app
    depends_on:
      - bank-server
    environment:
      - CLIENT_ID=4
    networks:
      - bank-network

networks:
  bank-network:
    driver: bridge